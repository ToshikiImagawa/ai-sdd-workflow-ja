# 品質チェックリスト: {機能名}

## メタ情報

| 項目           | 内容                                             |
|:-------------|:-----------------------------------------------|
| 機能名          | {機能名}                                          |
| チケット番号       | {チケット番号}                                       |
| 対象仕様書        | `.sdd/specification/[{path}/]{name}_spec.md`   |
| 対象設計書        | `.sdd/specification/[{path}/]{name}_design.md` |
| 生成日          | YYYY-MM-DD                                     |
| チェックリストバージョン | 1.0                                            |

※ 階層構造の場合、親機能は `index_spec.md`、`index_design.md`

## チェックリストサマリー

| カテゴリ        | 総項目数 | P0 | P1 | P2 | P3 |
|:------------|:-----|:---|:---|:---|:---|
| 要求レビュー      | -    | -  | -  | -  | -  |
| 仕様レビュー      | -    | -  | -  | -  | -  |
| 設計レビュー      | -    | -  | -  | -  | -  |
| 実装レビュー      | -    | -  | -  | -  | -  |
| テストレビュー     | -    | -  | -  | -  | -  |
| ドキュメントレビュー  | -    | -  | -  | -  | -  |
| セキュリティレビュー  | -    | -  | -  | -  | -  |
| パフォーマンスレビュー | -    | -  | -  | -  | -  |
| デプロイレビュー    | -    | -  | -  | -  | -  |

**優先度レベル**:

- **P0**: クリティカル - マージ前に必須
- **P1**: 高 - マージ前に完了すべき
- **P2**: 中 - リリース前に完了すべき
- **P3**: 低 - あると望ましい

---

## 1. 要求レビュー

### CHK001 [P0] - 機能要件の網羅性

- [ ] PRDのすべての機能要件（FR-xxx）が実装されている
- [ ] 各要件が具体的な実装にマッピングされている
- [ ] 部分的な実装がない

**検証方法**:

- PRDを確認
- 実装の網羅性を確認
- `/check_spec {機能名}` で整合性を検証

---

### CHK002 [P0] - 非機能要件

- [ ] パフォーマンス要件（NFR-xxx）が満たされている
- [ ] セキュリティ要件が実装されている
- [ ] スケーラビリティ要件が対応されている

**検証方法**:

- NFR仕様を確認
- パフォーマンステストを実行
- セキュリティ監査結果を確認

---

### CHK003 [P1] - 受け入れ基準

- [ ] PRDのすべての受け入れ基準が満たされている
- [ ] PRDで特定されたエッジケースが処理されている
- [ ] ユーザーシナリオが検証されている

**検証方法**:

- E2Eテストを実行
- 手動でのユーザーフローテスト

---

## 2. 仕様レビュー

### CHK004 [P0] - 公開APIの実装

- [ ] 仕様で定義されたすべてのAPIが実装されている
- [ ] APIシグネチャが仕様と完全に一致している
- [ ] 戻り値の型が仕様と一致している

**検証方法**:

```bash
# 実装と仕様を比較
```

**参照**: 仕様書 § 公開API

---

### CHK005 [P0] - データモデルの整合性

- [ ] 型定義が仕様と一致している
- [ ] 必須フィールドが強制されている
- [ ] オプショナルフィールドが適切に処理されている
- [ ] フィールド制約が検証されている

**検証方法**:

- 実装の型と仕様の型を比較
- データベーススキーマが仕様と一致することを確認
- バリデーションロジックを検証

---

### CHK006 [P0] - 動作の整合性

- [ ] 仕様のシーケンス図に従っている
- [ ] 状態遷移が仕様と一致している
- [ ] エラーハンドリングが仕様のパターンに従っている

**検証方法**:

- コード実行フローをトレース
- シーケンス図と比較

---

### CHK007 [P1] - 制約の実装

- [ ] 仕様のすべての制約が実装されている
- [ ] 境界条件が処理されている
- [ ] 不正な入力が適切に拒否されている

**検証方法**:

- 制約テストを確認
- 境界値をテスト

---

## 3. 設計レビュー

### CHK008 [P0] - アーキテクチャの整合性

- [ ] モジュール構造が設計書と一致している
- [ ] レイヤー分離が維持されている
- [ ] 依存関係が正しい方向に流れている

**検証方法**:

- ディレクトリ構造を設計書と比較
- import文を確認
- 循環依存をチェック

---

### CHK009 [P0] - 技術スタックの準拠

- [ ] 指定されたすべてのライブラリが使用されている
- [ ] 未承認の依存関係が追加されていない
- [ ] バージョン制約に従っている

**検証方法**:

- 依存関係を設計書と比較

---

### CHK010 [P1] - 設計判断のドキュメント化

- [ ] すべての重要な設計判断がドキュメント化されている
- [ ] 判断の根拠が明確である
- [ ] トレードオフが説明されている
- [ ] 検討した代替案が記録されている

**検証方法**:

- 「設計判断」セクションを確認

---

### CHK011 [P1] - 統合ポイントの検証

- [ ] 外部API統合がテストされている
- [ ] データベース接続が設定されている
- [ ] メッセージキュー接続が動作する
- [ ] サードパーティサービス統合が検証されている

**検証方法**:

- 統合テストを実行
- 設定ファイルを確認

---

## 4. 実装レビュー

### CHK012 [P0] - コード構造

- [ ] コードがプロジェクトの規約に従っている
- [ ] 命名が明確で一貫している
- [ ] デッドコードやコメントアウトされたブロックがない
- [ ] ファイル構成が論理的である

**検証方法**:

- コードレビュー
- リンターを実行

---

### CHK013 [P0] - エラーハンドリング

- [ ] すべてのエラーケースが処理されている
- [ ] エラーが適切にログ出力されている
- [ ] ユーザー向けエラーメッセージが明確である
- [ ] サイレント失敗がない

**検証方法**:

- エラーハンドリングコードを確認
- エラーシナリオをテスト

---

### CHK014 [P1] - コード品質

- [ ] コードスメルが検出されていない
- [ ] 複雑度が妥当である
- [ ] 重複コードがない
- [ ] 関数が単一責務である

**検証方法**:

- 静的解析ツールを実行
- 循環的複雑度を確認

---

## 5. テストレビュー

### CHK015 [P0] - 単体テストカバレッジ

- [ ] すべてのビジネスロジックに単体テストが存在する
- [ ] コードカバレッジ ≥ 80%
- [ ] すべての公開関数がテストされている
- [ ] エッジケースがカバーされている

**検証方法**:

```bash
# テストカバレッジを実行
```

**目標**: ≥80% ライン カバレッジ

---

### CHK016 [P0] - 統合テスト

- [ ] 統合テストがすべての主要フローをカバーしている
- [ ] 外部サービスモックが現実的である
- [ ] データベース操作がテストされている
- [ ] APIエンドポイントがテストされている

**検証方法**:

- 統合テストスイートを実行
- テストシナリオを確認

---

### CHK017 [P0] - エッジケーステスト

- [ ] null/undefined入力がテストされている
- [ ] 空のコレクションがテストされている
- [ ] 最大値/最小値がテストされている
- [ ] 並行操作がテストされている

**検証方法**:

- エッジケーステストスイートを確認
- 境界値テストを確認

---

### CHK018 [P1] - 非機能テスト

- [ ] パフォーマンステストが合格している
- [ ] 負荷テストが合格している
- [ ] セキュリティテストが合格している
- [ ] アクセシビリティテストが合格している（該当する場合）

**検証方法**:

- パフォーマンスベンチマークを実行
- 負荷テストを実行

---

## 6. ドキュメントレビュー

### CHK019 [P1] - コードコメント

- [ ] 複雑なロジックにコメントがある
- [ ] 公開APIにドキュメントがある
- [ ] 自明でない判断が説明されている
- [ ] TODOが追跡されている（または削除されている）

**検証方法**:

- コードコメントを確認
- ドキュメントカバレッジを確認

---

### CHK020 [P1] - 設計書の更新

- [ ] 設計書が実装を反映している
- [ ] 最近の判断がドキュメント化されている
- [ ] 図が最新である
- [ ] 変更履歴が維持されている

**検証方法**:

- 設計書を確認
- 実装と比較

---

## 7. セキュリティレビュー

### CHK021 [P0] - 入力値検証

- [ ] すべてのユーザー入力が検証されている
- [ ] SQLインジェクション対策が実施されている
- [ ] XSS対策が実施されている
- [ ] CSRF保護が実装されている（該当する場合）

**検証方法**:

- バリデーションコードを確認
- セキュリティスキャナーを実行

---

### CHK022 [P0] - 認証と認可

- [ ] 必要な箇所で認証が要求されている
- [ ] 認可チェックが実施されている
- [ ] ロールベースアクセス制御が動作する
- [ ] セッション管理が安全である

**検証方法**:

- 異なるユーザーロールでテスト
- 未認可アクセス試行を確認

---

### CHK023 [P0] - データ保護

- [ ] 機密データが暗号化されている
- [ ] パスワードがハッシュ化されている（平文でない）
- [ ] APIキーがハードコードされていない
- [ ] 個人情報が適切に扱われている

**検証方法**:

- 暗号化実装を確認
- 環境変数を確認

---

## 8. パフォーマンスレビュー

### CHK024 [P1] - レスポンスタイム

- [ ] APIレスポンスタイムが要件を満たしている
- [ ] データベースクエリが最適化されている
- [ ] N+1クエリ問題が回避されている
- [ ] 適切な箇所でキャッシュが実装されている

**検証方法**:

- パフォーマンスプロファイリングを実行
- データベースクエリプランを確認

---

### CHK025 [P2] - リソース使用量

- [ ] メモリ使用量が妥当である
- [ ] メモリリークが検出されていない
- [ ] CPU使用量が許容範囲である
- [ ] ネットワーク帯域幅が効率的である

**検証方法**:

- リソース監視を実行
- メモリ使用量をプロファイル

---

## 9. デプロイレビュー

### CHK026 [P0] - 設定管理

- [ ] 環境変数がドキュメント化されている
- [ ] 設定ファイルが正しい
- [ ] シークレットが適切に管理されている
- [ ] フィーチャーフラグが設定されている（該当する場合）

**検証方法**:

- 設定ドキュメントを確認
- シークレット管理を検証

---

### CHK027 [P0] - データベースマイグレーション

- [ ] マイグレーションがテストされている
- [ ] ロールバックマイグレーションが存在する
- [ ] データ移行が安全である
- [ ] データ損失リスクがない

**検証方法**:

- テスト環境でマイグレーションを実行
- ロールバックプロセスをテスト

---

### CHK028 [P0] - デプロイ計画

- [ ] デプロイ手順がドキュメント化されている
- [ ] ロールバック計画が存在する
- [ ] モニタリングが設置されている
- [ ] アラートが設定されている

**検証方法**:

- デプロイドキュメントを確認
- ロールバック手順をテスト

---

## 完了基準

### PR作成前チェックリスト

すべてのP0項目が完了している必要があります:

- [ ] すべてのP0項目がチェック済み
- [ ] すべてのテストが合格している
- [ ] 仕様との整合性が検証されている
- [ ] コードレビュー準備完了

### マージ前チェックリスト

すべてのP0とP1項目が完了している必要があります:

- [ ] すべてのP0項目がチェック済み
- [ ] すべてのP1項目がチェック済み
- [ ] コードレビュー承認済み
- [ ] CI/CDパイプライングリーン
- [ ] マージ準備完了

### リリース前チェックリスト

P2までのすべての項目が完了している必要があります:

- [ ] すべてのP0項目がチェック済み
- [ ] すべてのP1項目がチェック済み
- [ ] すべてのP2項目がチェック済み
- [ ] QAサインオフ済み
- [ ] 本番デプロイ準備完了

---

## Notes

- このチェックリストはテンプレートです。プロジェクトのニーズに応じてカスタマイズしてください
- 必要に応じてプロジェクト固有の項目を追加してください
- コンテキストに適用されない項目は削除してください
- 要件が変更された場合はチェックリストを更新してください

---

## 参照ドキュメント

- PRD: `.sdd/requirement/[{path}/]{name}.md`（存在する場合）
- 抽象仕様書: `.sdd/specification/[{path}/]{name}_spec.md`
- 技術設計書: `.sdd/specification/[{path}/]{name}_design.md`

※ 階層構造の場合、親機能は `index.md`、`index_spec.md`、`index_design.md`
